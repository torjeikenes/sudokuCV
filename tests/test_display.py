#! /usr/bin/env python3
# -*- coding: utf-8 -*-
# vim:fenc=utf-8
#
# Copyright Â© 2020 torje <torje@torje-ubuntu>
#
# Distributed under terms of the MIT license.

"""
Testing of detect module
"""

import unittest
import os
from .context import display
import cv2
import numpy as np
import imutils


class TestDisplay(unittest.TestCase):
    dir = os.path.dirname(__file__)
    dataPath = os.path.join(dir,'data/')
    grid =np.array([[0,0,0,0,5,0,0,7,0],
                    [0,0,0,3,0,0,2,5,0],
                    [0,0,0,0,0,4,0,3,8],
                    [0,0,0,0,7,6,4,0,3],
                    [1,0,0,0,0,0,0,0,2],
                    [9,0,3,2,8,0,0,0,0],
                    [4,5,0,1,0,0,0,0,0],
                    [0,8,6,0,0,5,0,0,0],
                    [0,7,0,0,9,0,0,0,0]])
    correct =np.array([[6,3,4,8,5,2,1,7,9],
                        [7,1,8,3,6,9,2,5,4],
                        [5,9,2,7,1,4,6,3,8],
                        [8,2,5,9,7,6,4,1,3],
                        [1,6,7,5,4,3,9,8,2],
                        [9,4,3,2,8,1,5,6,7],
                        [4,5,9,1,3,7,8,2,6],
                        [3,8,6,4,2,5,7,9,1],
                        [2,7,1,6,9,8,3,4,5]])
    cellPos = [(29, 26), (84, 26), (138, 27), (194, 28), (248, 29), (303, 29), 
    (359, 27), (415, 26), (470, 26), (29, 73), (83, 73), (138, 74), (193, 75), 
    (248, 75), (303, 75), (359, 74), (415, 73), (471, 72), (29, 119), (83, 120), 
    (138, 120), (193, 121), (248, 121), (304, 121), (360, 120), (416, 119), 
    (471, 119), (29, 166), (83, 167), (138, 168), (194, 168), (249, 168), 
    (304, 168), (360, 167), (416, 167), (471, 166), (29, 213), (84, 213), 
    (138, 214), (194, 214), (249, 214), (304, 214), (360, 213), (416, 213), 
    (471, 212), (29, 259), (84, 260), (138, 260), (194, 260), (249, 260), 
    (304, 260), (360, 260), (416, 259), (471, 258), (29, 306), (84, 307), 
    (138, 307), (194, 307), (250, 307), (304, 307), (361, 307), (416, 306), 
    (472, 305), (29, 352), (84, 353), (139, 353), (194, 353), (250, 353), 
    (305, 353), (361, 353), (417, 352), (472, 351), (30, 398), (84, 399), 
    (139, 399), (195, 399), (250, 399), (305, 399), (361, 398), (416, 398), (471, 397)]
    pts = np.float32([[160,183],
                        [577,101],
                        [286,587],
                        [771,451]])

    #pts = np.float32([[183,160],
    #                  [101,577],
    #                  [587,286],
    #                  [451,771]])

    def test_display(self):
        warpShape = (423,503)
        img = cv2.imread(os.path.join(self.dataPath,"resize.png"))
        display.display(img,self.cellPos,self.correct,self.pts,warpShape)


        
if __name__ == '__main__':
    unittest.main()
